<!DOCTYPE html>
<html >
    <head>
        <title>Impex Demo</title>
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
    </head>
    <body >
        <x-a>
            <x-b name="child1">
                <x-c></x-c>
            </x-b>
            <x-b name="child2">
                <x-c></x-c>
            </x-b>
        </x-a>
        <x-b name="bro"></x-b>


        <script type="text/javascript" src="../lib/impex/impex.all.js"></script>
        <script type="text/javascript">
            //自定义组件
            impex.component('x-a',{
                onCreate:function(msg){
                    this.msg = msg;
                },
                hi:function(){
                    this.msg.pub('hello','hi...boys');
                },
                template:"<div><button :click='hi()'>say hi...</button><br><slot></slot></div>"
            },['Msg']);
            impex.component('x-b',{
                state:{
                    msg:""
                },
                onCreate:function(msg){
                    msg.sub('hello',function(target,msg){
                        this.state.msg = msg +' from '+target.name;
                    });
                },
                template:"<div>i'm {{name}} {{msg}} <slot></slot></div>"
            },['Msg']);
            impex.component('x-c',{
                state:{
                    msg:""
                },
                onCreate:function(msg){
                    this.msg = msg;
                    this.msg.sub('hello',function(target,msg){
                        this.state.msg = msg +' from '+target.name;
                    });
                },
                hi:function(){
                    this.msg.pub('hello','hug me');
                },
                template:"<div>&nbsp;&nbsp;i'm grandson {{msg}} <button :click='hi()'>wanted a hug</button></div>"
            },['Msg']);

            //渲染
            impex.render(document.body);
            
        </script>
    </body>
</html>