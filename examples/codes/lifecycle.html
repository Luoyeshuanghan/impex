<!DOCTYPE html>
<html >
    <head>
        <title>Impex Demo</title>
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
    </head>
    <body >

        <button :click="load($event)">点击加载组件</button>
        <button :click="changeX()">点击修改参数</button>
        <button :click="destroyComp()">点击销毁组件</button>
        {{# info}}
        {{# comp}}
        

        <script type="text/javascript" src="../lib/impex/impex.all.js"></script>
        <script type="text/javascript">
            //自定义组件
            impex.component('x-comp',{
                onCreate:function(){
                    console.log('create...');
                },
                onInit:function(){
                    this.props.logger.call(this.parent,'init...');
                },
                onDisplay:function(){
                    this.props.logger.call(this.parent,'display...');
                },
                onUpdate:function(){
                    this.props.logger.call(this.parent,'update...');
                },
                onPropChange:function(){
                    this.props.logger.call(this.parent,'propChange...');
                },
                onDestroy:function(){
                    this.props.logger.call(this.parent,'destroy...');
                },
                data:{
                    i:0
                },  
                update:function(){
                    this.data.i++;
                },
                template:"<button :click='update()'>被点了{{i}}次</button>"
            });

            //渲染
            impex.render(document.body,{
                load:function(e) {
                    e.target.style.display = 'none';
                    this.data.info += '<p>loading...</p>';
                    this.data.comp = '<x-comp logger="this.record" p="x"></x-comp>';
                },
                record:function(msg){
                    this.data.info += '<p>'+msg+'</p>';
                },
                changeX:function(){
                    this.data.x += 1;
                },
                destroyComp:function(){
                    this.children[0].destroy();
                },
                data:{
                    info:'',
                    x:10
                }
            });
            
        </script>
    </body>
</html>